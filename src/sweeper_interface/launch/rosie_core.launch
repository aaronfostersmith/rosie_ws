<launch>

  <node pkg="rosserial_python" type="serial_node.py" name="turret_node">
    <param name="port" value="/dev/ttyUSB0"/>
    <param name="baud" value="57600"/>
      <param name="num_pts" value="64"/>
  </node>

    
<node pkg="rosserial_python" type="serial_node.py" name="mega_node">
    <param name="port" value="/dev/ttyACM0"/>
    <param name="baud" value="115200"/>
    <param name="/sweeper/mouse_gains" value="[1,1]" />
    <param name="/sweeper/enc_gains" value="[1,1]" />
     <param name="angle_min" value="-3.14159265359"/>
    <param name="angle_max" value="3.14159265359"/>
    <param name="num_pts" value="64"/>
    <param name="time_increment" value="0.03"/>
  </node>

  <node pkg="sweeper_interface" type = "rosie_interpreter" name="rosie_interpreter">
  </node>

    <node pkg="robot_localization" type="ekf_localization_node" name="ekf_se" clear_params="true">
    
      <param name="frequency" value="10"/>
      <param name="sensor_timeout" value="0.5"/>
      <param name="two_d_mode" value="true"/>

      <param name="imu0" value="/imu/data_raw"/>  
      <param name="imu0_relative" value="true"/>

<!--
      <param name="odom0" value="/odom/mouse"/> 
      <param name="odom0_differential" value ="true"/>
-->
      <param name="odom0" value="/odom/enc"/>
	  
      <param name="map_frame" value="map"/>
      <param name="odom_frame" value="odom"/>
      <param name="base_link_frame" value="base_link"/>
      <param name="world_frame" value="odom"/>


<!--
	<rosparam param="odom0_config">[true, true, false, 
                                        false, false, true, 
                                        false, false, false, 
                                        false, false, false,
                                        false, false, false]</rosparam>

-->
	<rosparam param="odom0_config">[true, true, false, 
                                    false, false, true, 
                                    false, false, false, 
                                    false, false, false,
                                    false, false, false]</rosparam>


	<rosparam param="imu0_config">[false, false, false, 
                                   false, false, false, 
                                   false, false, false, 
                                   false, false, true,
                                   false, false, false]</rosparam>

      <param name="print_diagnostics" value="false"/>


  </node>


  <!-- Move base -->
  <node pkg="move_base" type="move_base" respawn="false" name="move_base" output="screen">
    <rosparam file="$(find rosie_navigation)/config/costmap_common_params.yaml" command="load" ns="global_costmap" />
    <rosparam file="$(find rosie_navigation)/config/costmap_common_params.yaml" command="load" ns="local_costmap" />
    <rosparam file="$(find rosie_navigation)/config/local_costmap_params.yaml" command="load" />
    <rosparam file="$(find rosie_navigation)/config/global_costmap_params.yaml" command="load" />
    <rosparam file="$(find rosie_navigation)/config/base_local_planner_params.yaml" command="load" />
  
    <param name="base_local_planner" value="dwa_local_planner/DWAPlannerROS" />
    <param name="controller_frequency" value="5" />
    <param name="planner_frequency" value="0.25" />
  
    <remap from="cmd_vel" to="cmd_vel"/>
    <remap from="odom" to="odom"/>
    <remap from="scan" to="/sweeper/scan"/>

	  
  </node>
    
 <!-- convert joint states to TF transforms for rviz, etc -->
        <param name="robot_description" command="$(find xacro)/xacro.py '$(find rosie_description)/urdf/rosie.xacro'" />

  <node name="robot_state_publisher" pkg="robot_state_publisher" type="robot_state_publisher"
	respawn="false" output="screen">
    <remap from="/joint_states" to="/rosie/joint_states" />
  </node>
  
    
</launch>
